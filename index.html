<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Visual Lab – Heat Conduction</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Segoe UI,Tahoma,sans-serif}

:root{
--primary:#0a2463;
--secondary:#1e3d8f;
--accent:#fd7e14;
--bg:#f0f7ff;
}

body{background:var(--bg);color:#222}

/* HEADER */
header{
background:linear-gradient(135deg,var(--primary),var(--secondary));
color:white;padding:1.8rem;text-align:center;
}

/* NAV */
nav{
background:var(--secondary);
display:flex;justify-content:center;gap:10px;
padding:10px;position:sticky;top:0
}
nav button{
background:none;border:none;color:white;
padding:8px 16px;border-radius:6px;
cursor:pointer;font-weight:600
}
nav button.active{background:#3e8eef}

/* SECTIONS */
.section{
display:none;
max-width:1200px;
margin:20px auto;
background:white;
padding:24px;
border-radius:12px;
box-shadow:0 6px 14px rgba(0,0,0,.12)
}
.section.active{display:block}

/* SIMULATION */
.sim-grid{
display:grid;
grid-template-columns:1fr 1.4fr 1.4fr;
gap:16px
}
.panel{
background:rgba(255,255,255,.85);
padding:16px;border-radius:14px;
box-shadow:0 8px 18px rgba(0,0,0,.2)
}
.panel h3{border-bottom:2px solid #e5e7eb;margin-bottom:10px}

input,select{
width:100%;padding:8px;margin:6px 0;
border-radius:6px;border:1px solid #ccc
}
button.calc{
background:linear-gradient(135deg,#ff9f1c,var(--accent));
border:none;color:white;
padding:12px;border-radius:8px;
cursor:pointer;font-weight:700
}

canvas{
background:white;border-radius:12px;
box-shadow:0 6px 14px rgba(0,0,0,.2);
margin-top:10px
}

.result{
background:#eef7ff;
padding:12px;border-radius:10px;
border-left:5px solid #06b6d4
}

@media(max-width:900px){
.sim-grid{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>
<h1>Visual Lab: Heat Conduction</h1>
<p>Fourier’s Law – Cylindrical Pipe Simulation</p>
</header>

<nav>
<button class="tab active" data-target="aim">Aim</button>
<button class="tab" data-target="simulation">Simulation</button>
</nav>

<section id="aim" class="section active">
<h2>Aim</h2>
<p>
To study heat conduction through cylindrical pipes using Fourier’s Law
and visualize temperature distribution and heat flow rate.
</p>
</section>

<!-- ================= SIMULATION ================= -->
<section id="simulation" class="section">

<h2><i class="fas fa-flask"></i> Heat Conduction Simulation</h2>

<div class="sim-grid">

<!-- INPUT -->
<div class="panel">
<h3>Input Parameters</h3>

<label>Inner Radius</label>
<input id="r1" type="number" value="5">
<select id="r1unit"><option value="0.01">cm</option><option value="1">m</option></select>

<label>Outer Radius</label>
<input id="r2" type="number" value="7">
<select id="r2unit"><option value="0.01">cm</option><option value="1">m</option></select>

<label>Inner Temperature (°C)</label>
<input id="T1" type="number" value="200">

<label>Outer Temperature (°C)</label>
<input id="T2" type="number" value="50">

<label>Thermal Conductivity (W/m·K)</label>
<input id="k" type="number" value="45">

<label>Pipe Length</label>
<input id="L" type="number" value="1">
<select id="Lunit"><option value="1">m</option><option value="0.01">cm</option></select>

<label>Time (s)</label>
<input id="time" type="number" value="60">

<label>Output Unit</label>
<select id="outunit"><option value="W">Watt</option><option value="cal">cal/sec</option></select>

<button class="calc" onclick="calculate()">Calculate</button>
</div>

<!-- PIPE -->
<div class="panel">
<h3>Pipe Cross-Section</h3>
<canvas id="pipeCanvas" width="340" height="340"></canvas>
<p style="font-size:13px;color:#555">
Red → hot inner surface, White → cooler outer surface
</p>
</div>

<!-- RESULTS -->
<div class="panel">
<h3>Results & Graphs</h3>
<div id="results" class="result"></div>
<canvas id="tempChart"></canvas>
<canvas id="timeChart"></canvas>
</div>

</div>
</section>

<script>
/* NAV */
document.querySelectorAll(".tab").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
b.classList.add("active");
document.getElementById(b.dataset.target).classList.add("active");
};
});

let tempChart=null,timeChart=null;

/* PIPE */
function drawPipe(r1,r2){
const c=document.getElementById("pipeCanvas"),ctx=c.getContext("2d");
ctx.clearRect(0,0,c.width,c.height);
const cx=c.width/2,cy=c.height/2;
const scale=140/r2;
const R1=r1*scale,R2=r2*scale;
const g=ctx.createRadialGradient(cx,cy,R1,cx,cy,R2);
g.addColorStop(0,"#ff5722");g.addColorStop(1,"#fff");
ctx.beginPath();ctx.arc(cx,cy,R2,0,2*Math.PI);ctx.fillStyle=g;ctx.fill();
ctx.beginPath();ctx.arc(cx,cy,R1,0,2*Math.PI);ctx.fillStyle="#fff";ctx.fill();
ctx.stroke();
}

/* CALC */
function calculate(){
const r1=+r1v(),r2=+r2v();
const T1v_=+T1.value,T2v_=+T2.value;
const k_=+k.value,L_=+L.value*+Lunit.value;
const t_=+time.value;
const unit=outunit.value;

const Q=(2*Math.PI*k_*L_*(T1v_-T2v_))/Math.log(r2/r1);
const Qout=unit==="cal"?Q/4.186:Q;

results.innerHTML=
`<b>Heat Flow Rate:</b> ${Qout.toFixed(4)} ${unit==="cal"?"cal/sec":"W"}<br>
<b>Total Heat:</b> ${(Qout*t_).toFixed(4)}<br>
<b>Formula:</b> Q = 2πkL(T₁−T₂)/ln(r₂/r₁)`;

drawPipe(r1,r2);

/* TEMP PROFILE */
let R=[],T=[];
for(let i=0;i<=20;i++){
let rv=r1+(r2-r1)*i/20;
R.push(rv.toFixed(4));
T.push(T1v_-(T1v_-T2v_)*Math.log(rv/r1)/Math.log(r2/r1));
}

tempChart?.destroy();
tempChart=new Chart(tempChartEl(),{
type:"line",
data:{labels:R,datasets:[{label:"Temperature (°C)",data:T,borderColor:"#ff5722",borderWidth:3}]}
});

/* TIME GRAPH */
let tt=[],qq=[];
for(let i=0;i<=10;i++){tt.push(i*t_/10);qq.push(Qout);}
timeChart?.destroy();
timeChart=new Chart(timeChartEl(),{
type:"line",
data:{labels:tt,datasets:[{label:"Heat Flow",data:qq,borderColor:"#0b5ed7",borderWidth:3}]}
});
}

const r1v=()=>r1.value*r1unit.value;
const r2v=()=>r2.value*r2unit.value;
const tempChartEl=()=>document.getElementById("tempChart");
const timeChartEl=()=>document.getElementById("timeChart");
</script>

</body>
</html>
